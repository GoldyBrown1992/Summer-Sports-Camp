<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goldy Brown's Auction - The Ultimate Luxury Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Bebas+Neue&family=Righteous&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Righteous', cursive;
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fall {
            from { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            to { transform: translateY(100vh) rotate(360deg); opacity: 0.5; }
        }

        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes float-emoji {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Floating elements */
        .floating-money {
            position: fixed;
            font-size: 3rem;
            animation: fall 10s linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        .cloud {
            position: fixed;
            width: 100px;
            height: 60px;
            background: white;
            border-radius: 100px;
            opacity: 0.7;
            animation: float 8s ease-in-out infinite;
            z-index: 1;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 100px;
        }

        .cloud::before {
            width: 50px;
            height: 50px;
            top: -25px;
            left: 10px;
        }

        .cloud::after {
            width: 60px;
            height: 40px;
            top: -15px;
            right: 10px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .main-title {
            font-family: 'Permanent Marker', cursive;
            font-size: 5rem;
            color: #000;
            text-shadow: 3px 3px 0px #00FFFF;
            transform: rotate(-2deg);
            display: inline-block;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 3px;
        }

        /* Timer Section */
        .timer-section {
            max-width: 800px;
            margin: 2rem auto;
            background: linear-gradient(135deg, #87CEEB 0%, #5F9EA0 100%);
            border: 8px solid #000;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.3);
            animation: float 6s ease-in-out infinite;
        }

        .timer-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2.5rem;
            color: #fff;
            text-align: center;
            margin-bottom: 1.5rem;
            text-shadow: 3px 3px 0px #000;
        }

        .timer-display {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .time-unit {
            background: #fff;
            border: 4px solid #000;
            border-radius: 10px;
            padding: 1rem;
            min-width: 100px;
            text-align: center;
            transition: transform 0.3s;
        }

        .time-unit:hover {
            transform: rotate(0deg) scale(1.1);
        }

        .time-value {
            font-size: 3rem;
            color: #000080;
            display: block;
        }

        .time-label {
            font-size: 1rem;
            color: #666;
            text-transform: uppercase;
        }

        /* Bid Section */
        .bid-section {
            max-width: 600px;
            margin: 2rem auto;
            background: linear-gradient(135deg, #228B22 0%, #006400 100%);
            border: 8px solid #000;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.3);
            animation: float 6s ease-in-out infinite;
            animation-delay: 1s;
        }

        .bid-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2.5rem;
            color: #fff;
            margin-bottom: 1rem;
            text-shadow: 3px 3px 0px #000;
        }

        .current-bid {
            font-size: 1.5rem;
            color: #FFD700;
            margin-bottom: 1.5rem;
        }

        .bid-amount {
            font-size: 3rem;
            color: #FFD700;
            text-shadow: 2px 2px 0px #000;
        }

        .bid-button {
            background: #FFD700;
            color: #000;
            border: 4px solid #000;
            border-radius: 50px;
            padding: 1rem 3rem;
            font-size: 1.5rem;
            font-family: 'Bebas Neue', cursive;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bid-button:hover {
            transform: scale(1.1) rotate(-2deg);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
        }

        .bid-button .emoji {
            animation: pulse 1s infinite;
        }

        /* Video Section */
        .video-section {
            max-width: 800px;
            margin: 2rem auto;
            background: #FFF8DC;
            border: 8px solid #000;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.3);
            animation: float 6s ease-in-out infinite;
            animation-delay: 2s;
        }

        .video-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            color: #FF1493;
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 0px #000;
        }

        .video-placeholder {
            background: #000;
            height: 400px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .play-button {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .play-button:hover {
            transform: scale(1.2);
        }

        .play-button::after {
            content: '▶';
            font-size: 2rem;
            color: #000;
            margin-left: 5px;
        }

        /* Info Grid */
        .info-grid {
            max-width: 1000px;
            margin: 2rem auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            padding: 0 2rem;
        }

        .info-card {
            background: #FFD700;
            border: 8px solid #000;
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
            transition: transform 0.3s;
            animation: float 6s ease-in-out infinite;
        }

        .info-card:nth-child(2) { animation-delay: 0.5s; }
        .info-card:nth-child(3) { animation-delay: 1s; }

        .info-card:hover {
            transform: rotate(0deg) scale(1.05);
        }

        .info-label {
            font-size: 1.2rem;
            color: #000;
            margin-bottom: 0.5rem;
        }

        .info-value {
            font-size: 2rem;
            color: #FF1493;
            font-weight: bold;
            text-shadow: 2px 2px 0px #000;
        }

        /* Leaderboard */
        .leaderboard {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFB6C1 0%, #FF69B4 100%);
            border: 8px solid #000;
            border-radius: 20px;
            padding: 1rem;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
            z-index: 100;
            transition: all 0.3s ease;
            cursor: pointer;
            max-width: 300px;
        }

        .leaderboard.collapsed {
            width: auto;
            padding: 0.5rem 1rem;
        }

        .leaderboard-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .leaderboard-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 1.5rem;
            color: #fff;
            text-shadow: 2px 2px 0px #000;
        }

        .toggle-icon {
            font-size: 1.2rem;
            transition: transform 0.3s;
        }

        .leaderboard.collapsed .toggle-icon {
            transform: rotate(180deg);
        }

        .leaderboard-content {
            margin-top: 1rem;
            display: block;
        }

        .leaderboard.collapsed .leaderboard-content {
            display: none;
        }

        .leaderboard-item {
            background: rgba(255,255,255,0.9);
            border: 3px solid #000;
            border-radius: 10px;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .rank-badge {
            font-size: 1.5rem;
        }

        .bidder-name {
            flex: 1;
            font-size: 1rem;
            color: #000;
        }

        .bid-amount-small {
            font-size: 1rem;
            color: #FF1493;
            font-weight: bold;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #fff;
            border: 8px solid #000;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 15px 15px 0px rgba(0,0,0,0.3);
            animation: bounce-in 0.5s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-family: 'Bebas Neue', cursive;
            font-size: 2rem;
            color: #FF1493;
            text-shadow: 2px 2px 0px #000;
        }

        .close-button {
            font-size: 2rem;
            cursor: pointer;
            color: #000;
            transition: transform 0.3s;
        }

        .close-button:hover {
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 0.8rem;
            border: 3px solid #000;
            border-radius: 10px;
            font-family: 'Righteous', cursive;
            font-size: 1rem;
            transition: transform 0.3s;
        }

        .form-input:focus {
            outline: none;
            transform: scale(1.02);
            box-shadow: 5px 5px 0px rgba(0,0,0,0.2);
        }

        #card-element {
            border: 3px solid #000;
            border-radius: 10px;
            padding: 1rem;
            background: #f9f9f9;
        }

        .submit-button {
            width: 100%;
            background: #228B22;
            color: #fff;
            border: 4px solid #000;
            border-radius: 50px;
            padding: 1rem;
            font-size: 1.5rem;
            font-family: 'Bebas Neue', cursive;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
        }

        .submit-button:hover {
            transform: scale(1.05);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
        }

        .submit-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .success-emoji {
            position: fixed;
            font-size: 3rem;
            pointer-events: none;
            z-index: 2000;
            animation: float-emoji 2s ease-out;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
                padding-right: 120px; /* Space for leaderboard */
            }

            .subtitle {
                font-size: 1.5rem;
            }

            .timer-section,
            .bid-section,
            .video-section {
                margin: 1rem;
            }

            .time-value {
                font-size: 2rem;
            }

            .time-unit {
                min-width: 70px;
                padding: 0.5rem;
            }

            .leaderboard {
                top: 100px; /* Move below title on mobile */
                right: 10px;
                max-width: 180px;
                font-size: 0.85rem;
            }
            
            .leaderboard.collapsed {
                top: 20px; /* When collapsed, can be higher */
                max-width: 100px;
            }
            
            .leaderboard-title {
                font-size: 1.2rem;
            }
            
            .leaderboard-item {
                padding: 0.3rem;
                font-size: 0.8rem;
            }

            .modal-content {
                padding: 1.5rem;
            }

            .video-placeholder {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating decorations -->
    <div class="floating-money" style="top: -100px; left: 10%;">💰</div>
    <div class="floating-money" style="top: -300px; left: 30%; animation-delay: 2s;">🪙</div>
    <div class="floating-money" style="top: -500px; left: 50%; animation-delay: 4s;">💸</div>
    <div class="floating-money" style="top: -700px; left: 70%; animation-delay: 6s;">💰</div>
    <div class="floating-money" style="top: -900px; left: 90%; animation-delay: 8s;">🪙</div>
    
    <div class="cloud" style="top: 10%; left: 5%;"></div>
    <div class="cloud" style="top: 20%; right: 10%; animation-delay: 3s;"></div>
    <div class="cloud" style="top: 50%; left: -100px; animation-delay: 5s;"></div>

    <!-- Header -->
    <header class="header">
        <h1 class="main-title">GOLDY BROWN'S AUCTION</h1>
        <p class="subtitle">THE ULTIMATE LUXURY EXPERIENCE</p>
    </header>

    <!-- Timer Section -->
    <section class="timer-section">
        <h2 class="timer-title">🎯 AUCTION ENDS IN 🎯</h2>
        <div class="timer-display">
            <div class="time-unit">
                <span class="time-value" id="days">00</span>
                <span class="time-label">Days</span>
            </div>
            <div class="time-unit">
                <span class="time-value" id="hours">00</span>
                <span class="time-label">Hours</span>
            </div>
            <div class="time-unit">
                <span class="time-value" id="minutes">00</span>
                <span class="time-label">Minutes</span>
            </div>
            <div class="time-unit">
                <span class="time-value" id="seconds">00</span>
                <span class="time-label">Seconds</span>
            </div>
        </div>
    </section>

    <!-- Bid Section -->
    <section class="bid-section">
        <h2 class="bid-title">💎 PLACE YOUR BID! 💎</h2>
        <div class="current-bid">
            Current Highest Bid:
            <div class="bid-amount">$<span id="currentBid">0</span></div>
        </div>
        <button class="bid-button" id="bidButton">
            <span class="emoji">💰</span>
            BID NOW!
        </button>
    </section>

    <!-- Video Section -->
    <section class="video-section">
        <h3 class="video-title">💧 UNVEIL THE DRIP 💧</h3>
        <div class="video-placeholder">
            <div class="play-button"></div>
        </div>
    </section>

    <!-- Info Grid -->
    <div class="info-grid">
        <div class="info-card">
            <div class="info-label">Starting Bid</div>
            <div class="info-value">$1</div>
        </div>
        <div class="info-card">
            <div class="info-label">Total Bids</div>
            <div class="info-value" id="totalBids">0</div>
        </div>
        <div class="info-card">
            <div class="info-label">Time Left</div>
            <div class="info-value" id="quickTime">--:--:--</div>
        </div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard collapsed" id="leaderboard">
        <div class="leaderboard-header">
            <h3 class="leaderboard-title">👑 TOP BIDS</h3>
            <span class="toggle-icon">▼</span>
        </div>
        <div class="leaderboard-content" id="leaderboardContent">
            <!-- Leaderboard items will be populated here -->
        </div>
    </div>

    <!-- Bid Modal -->
    <div class="modal" id="bidModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">PLACE YOUR BID</h3>
                <span class="close-button" id="closeBidModal">✕</span>
            </div>
            <form id="bidForm">
                <div class="form-group">
                    <label class="form-label" for="bidderName">Your Name</label>
                    <input type="text" class="form-input" id="bidderName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="bidderEmail">Email Address</label>
                    <input type="email" class="form-input" id="bidderEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="bidAmount">Bid Amount ($)</label>
                    <input type="number" class="form-input" id="bidAmount" min="1" step="1" required>
                    <div class="error-message" id="bidError"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Payment Details</label>
                    <div id="card-element"></div>
                    <div class="error-message" id="cardError"></div>
                </div>
                <button type="submit" class="submit-button" id="submitBid">SUBMIT BID</button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🎉 BID PLACED! 🎉</h3>
                <span class="close-button" id="closeSuccessModal">✕</span>
            </div>
            <p style="text-align: center; font-size: 1.2rem; margin: 1rem 0;">
                Your bid has been successfully placed!
            </p>
            <p style="text-align: center; color: #666;">
                You're now in the running for this exclusive item.
            </p>
        </div>
    </div>

    <script>
        // Global variables
        let stripe;
        let elements;
        let cardElement;
        let currentHighestBid = 0;
        let totalBidCount = 0;

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            fetchLeaderboardData();
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Delay Stripe initialization slightly
            setTimeout(initializeStripe, 500);
        });

        // Setup all event listeners
        function setupEventListeners() {
            // Bid button
            document.getElementById('bidButton').addEventListener('click', openBidModal);
            
            // Modal close buttons
            document.getElementById('closeBidModal').addEventListener('click', closeBidModal);
            document.getElementById('closeSuccessModal').addEventListener('click', closeSuccessModal);
            
            // Leaderboard toggle
            document.getElementById('leaderboard').addEventListener('click', toggleLeaderboard);
            
            // Bid form submission
            document.getElementById('bidForm').addEventListener('submit', handleBidSubmit);
            
            // Click outside modal to close
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });
        }

        // Initialize Stripe
        function initializeStripe() {
            stripe = Stripe('pk_live_51Li2EuHHRq5TjW22f3qkBVCiibv9CvogZuYTRa79BXS5ZhWxszEeBrBZZRhzrwPR4IzYelVSy4qxWfQ3wwWxWNhP00ZR6je4XQ');
            elements = stripe.elements();
            
            const style = {
                base: {
                    fontSize: '16px',
                    fontFamily: '"Righteous", cursive',
                    color: '#32325d',
                    '::placeholder': {
                        color: '#aab7c4'
                    }
                }
            };
            
            cardElement = elements.create('card', { style: style });
            cardElement.mount('#card-element');
            
            cardElement.on('change', function(event) {
                const displayError = document.getElementById('cardError');
                if (event.error) {
                    displayError.textContent = event.error.message;
                } else {
                    displayError.textContent = '';
                }
            });
        }

        // Countdown timer
        function updateCountdown() {
            const targetDate = new Date('2025-09-01T23:59:59-07:00');
            const now = new Date();
            const difference = targetDate - now;
            
            if (difference > 0) {
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = String(days).padStart(2, '0');
                document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
                
                // Update quick time display
                document.getElementById('quickTime').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            } else {
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
                document.getElementById('quickTime').textContent = '00:00:00';
            }
        }

        // Modal functions
        function openBidModal() {
            document.getElementById('bidModal').classList.add('active');
            const minBid = Math.max(1, currentHighestBid + 1);
            document.getElementById('bidAmount').min = minBid;
            document.getElementById('bidAmount').value = minBid;
        }

        function closeBidModal() {
            document.getElementById('bidModal').classList.remove('active');
            document.getElementById('bidForm').reset();
            document.getElementById('bidError').textContent = '';
            document.getElementById('cardError').textContent = '';
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
        }

        // Toggle leaderboard
        function toggleLeaderboard(e) {
            e.stopPropagation();
            const leaderboard = document.getElementById('leaderboard');
            leaderboard.classList.toggle('collapsed');
        }

        // Handle bid submission
        async function handleBidSubmit(e) {
            e.preventDefault();
            
            const submitButton = document.getElementById('submitBid');
            submitButton.disabled = true;
            submitButton.textContent = 'PROCESSING...';
            
            const name = document.getElementById('bidderName').value;
            const email = document.getElementById('bidderEmail').value;
            const amount = parseInt(document.getElementById('bidAmount').value);
            
            // Validate bid amount
            const minBid = Math.max(1, currentHighestBid + 1);
            if (amount < minBid) {
                document.getElementById('bidError').textContent = `Minimum bid is $${minBid}`;
                submitButton.disabled = false;
                submitButton.textContent = 'SUBMIT BID';
                return;
            }
            
            try {
                // Create payment intent
                const response = await fetch('/.netlify/functions/create-payment-intent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        amount: amount * 100, // Convert to cents
                        name: name,
                        email: email
                    })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }
                
                // Confirm payment
                const result = await stripe.confirmCardPayment(data.clientSecret, {
                    payment_method: {
                        card: cardElement,
                        billing_details: {
                            name: name,
                            email: email
                        }
                    }
                });
                
                if (result.error) {
                    throw new Error(result.error.message);
                } else if (result.paymentIntent.status === 'requires_capture') {
                    // Save to sheets
                    await fetch('/.netlify/functions/save-to-sheets', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: name,
                            email: email,
                            amount: amount,
                            paymentIntentId: result.paymentIntent.id
                        })
                    });
                    
                    // Update UI
                    currentHighestBid = amount;
                    totalBidCount++;
                    document.getElementById('currentBid').textContent = amount;
                    document.getElementById('totalBids').textContent = totalBidCount;
                    
                    // Show success
                    closeBidModal();
                    showSuccessAnimation();
                    document.getElementById('successModal').classList.add('active');
                    
                    // Refresh leaderboard
                    fetchLeaderboardData();
                }
            } catch (error) {
                document.getElementById('cardError').textContent = error.message;
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'SUBMIT BID';
            }
        }

        // Show success animation
        function showSuccessAnimation() {
            const emojis = ['🎉', '💰', '🎊', '✨', '🏆'];
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'success-emoji';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = Math.random() * window.innerWidth + 'px';
                    emoji.style.bottom = '50px';
                    document.body.appendChild(emoji);
                    
                    setTimeout(() => emoji.remove(), 2000);
                }, i * 200);
            }
        }

        // Fetch leaderboard data
        async function fetchLeaderboardData() {
            try {
                const response = await fetch('/.netlify/functions/get-leaderboard');
                const data = await response.json();
                
                if (data.leaderboard && data.leaderboard.length > 0) {
                    // Update current highest bid
                    currentHighestBid = data.leaderboard[0].amount;
                    document.getElementById('currentBid').textContent = currentHighestBid;
                    
                    // Update total bids
                    totalBidCount = data.totalBids || data.leaderboard.length;
                    document.getElementById('totalBids').textContent = totalBidCount;
                    
                    // Update leaderboard display
                    const leaderboardContent = document.getElementById('leaderboardContent');
                    leaderboardContent.innerHTML = '';
                    
                    // Get unique bidders
                    const uniqueBidders = [];
                    const seenNames = new Set();
                    
                    for (const bid of data.leaderboard) {
                        if (!seenNames.has(bid.name) && uniqueBidders.length < 5) {
                            seenNames.add(bid.name);
                            uniqueBidders.push(bid);
                        }
                    }
                    
                    uniqueBidders.forEach((bid, index) => {
                        const item = document.createElement('div');
                        item.className = 'leaderboard-item';
                        
                        const badges = ['🥇', '🥈', '🥉', '4️⃣', '5️⃣'];
                        
                        item.innerHTML = `
                            <span class="rank-badge">${badges[index]}</span>
                            <span class="bidder-name">${bid.name}</span>
                            <span class="bid-amount-small">$${bid.amount}</span>
                        `;
                        
                        leaderboardContent.appendChild(item);
                    });
                }
            } catch (error) {
                console.error('Error fetching leaderboard:', error);
            }
        }
    </script>
</body>
</html>
